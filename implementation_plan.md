# Safegame 개발 및 확장 계획 (Stage 2: 화재 탈출)

이 문서는 React-Phaser 하이브리드 아키텍처를 기반으로 한 스테이지 2 '화재 탈출: 연기로 가득 찬 복도'의 구현 로직과 향후 계획을 담고 있습니다.

## 1. 완료된 항목 (Completed)
- ✅ React + Zustand + Phaser 하이브리드 인프라 구축
- ✅ 핵심 UI 컴포넌트 모듈화 (Hearts, Inventory, Dialogue, Quiz)
- ✅ `framer-motion`을 활용한 고급 애니메이션 및 트랜지션 적용
- ✅ 기본적인 아이템 획득 및 상호작용 시스템

---

## 2. 스테이지 2: 화재 탈출 (Fire & Escape) Roadmap

### 🚀 5단계: 환경 및 기본 기믹 구현 (Environment & Basic Mechanics)
- **질식 게이지 시스템**: `useGameStore`에 `oxygen` 상태 추가 및 HUD 구현. 
  - 자세(Crouch)에 따라 게이지 상승 속도 조절.
- **낮은 자세 유지(Crouch)**: `Player.js`에 `isCrouched` 상태 추가.
  - `Shift` 키 입력 시 속도 감소 및 캐릭터 스프라이트 높이 축소.
- **연기 이펙트(Smoke Overlay)**: Phaser 쉐이더 또는 React 오버레이를 이용해 화면을 어둡게 덮고, 시야 제한 효과 구현.

### 🚀 6단계: 아이템 조합 및 상호작용 (Crafting & Interactions)
- **아이템 조합 시스템**: 인벤토리에서 '손수건' + '생수물' 선택 시 '젖은 손수건'으로 조합되는 로직 구현.
- **열 감지 시스템**: 문(Door) 오브젝트 상호작용 시 '온도 체크' 선행 여부 판단 로직 추가.
- **함정 로직**: 엘리베이터 상호작용 시 즉시 패널티(대화 및 하트 차감) 발동.

### 🚀 7단계: PASS 소화기 미니게임 (Interactive Mini-game)
- **미니게임 모달 제작**: 소화기 사용 시 별도의 React 모달 팝업.
- **4단계 조작 구현**: 각 단계별 드래그/클릭 액션.
  1. **P (Pull)**: 안전핀을 옆으로 드래그하여 제거.
  2. **A (Aim)**: 노즐을 불꽃 방향으로 드래그.
  3. **S (Squeeze)**: 손잡이를 클릭하여 움켜쥐기.
  4. **S (Sweep)**: 마우스를 좌우로 흔들어 불끄기.

### 🚀 8단계: 탈출 및 최종 평가 (Escape & Review)
- **비상구 시스템**: 유도등 줄기를 따라 최종 탈출구에 도달 시 스테이지 클리어.
- **스테이지 클리어 화면**: 획득 점수 및 화재 안전 상식 요약 노출.

---

## 3. 기술적 도전 과제
- **멀티플레이어 동기화**: 연기 속에서 다른 플레이어의 위치와 상태(장착 아이템 등) 실시간 동기화.
- **미니게임 집중도**: 모달이 열려 있는 동안 게임 월드 시간 정지(Pause) 또는 안전 지역 확보 로직.

---

## 4. 최종 목표
사용자가 실제 화재 상황에서 당황하지 않고 **'낮은 자세', '코와 입 막기', 'PASS 소화기 사용법'**을 몸소 체험하며 익힐 수 있는 몰입형 안전 교육 게임 완성.
